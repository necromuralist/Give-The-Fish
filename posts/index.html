<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="The functions of a fish." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Give the Fish</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../rss.xml" hreflang="en" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Give-The-Fish/posts/index.html" rel="canonical">
<link href="index-1.html" rel="next" type="text/html"><!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><!-- favicons -->
<link href="../apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="../android-chrome-192x192.png" rel="android-chrome-icon" sizes="192x192">
<link href="../android-chrome-512x512.png" rel="android-chrome-icon" sizes="512x512">
<link href="../favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="../favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="../site.webmanifest" rel="manifest">
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="../"><span id="blog-title">Give the Fish</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href=".">Posts</a></li>
<li class="nav-item"><a class="nav-link" href="../archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="../categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="../rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Monkey Sites</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/">The Cloistered Monkey</a> <a class="dropdown-item" href="https://necromuralist.github.io/Ape-Iron/">Ape Iron</a> <a class="dropdown-item" href="https://necromuralist.github.io/Beach-Pig-Thigh/">Beach Pig Runp & Thigh</a> <a class="dropdown-item" href="https://necromuralist.github.io/Bowling-For-Data/">Bowling For Data</a> <a class="dropdown-item" href="https://necromuralist.github.io/Neurotic-Networking/">Neurotic Networking</a> <a class="dropdown-item" href="https://necromuralist.github.io/Terribilis-Ludum/">Terribilis Ludum</a> <a class="dropdown-item" href="https://necromuralist.github.io/Visions-Voices-Data/">Visions, Voices, Data</a></div>
</li>
</ul>
<!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://necromuralist.github.io/Give-The-Fish/"><input name="k8" type="hidden" value="#444444"><input name="k9" type="hidden" value="#D51920"><input name="kt" type="hidden" value="h"><input class="span2" maxlength="255" name="q" placeholder="Search…" type="text"><input style="visibility: hidden;display:none" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<div class="postindex">
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="abbreviations-mother-ship/index.html">Abbreviations: Mother Ship</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="abbreviations-mother-ship/index.html" rel="bookmark"><time class="published dt-published" datetime="2024-04-25T14:22:03-07:00" itemprop="datePublished" title="2024-04-25 14:22">2024-04-25 14:22</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="abbreviations-mother-ship/index.html#org791bd01">Mount Drives</a></li>
</ul>
</div>
</div>
<p>This tangle is for extra configurations that are meant for PCs with a GUI that a user interacts with directly (as opposed to a server) and it has stuff that aren't going to be used on servers.</p>
<p>I'm putting it in <code>dingehaufen/conf.d/</code> so it should be linked to in <code>.config/fish/conf.d/</code> for PCs that need it.</p>
<div class="outline-2" id="outline-container-org791bd01">
<h2 id="org791bd01">Mount Drives</h2>
<div class="outline-text-2" id="text-org791bd01">
<p>This is an abbreviation that mounts both the cryfs folders and the external (LUKs) drive.</p>
<div class="highlight">
<pre><span></span>abbr --add -- mount-drives <span class="s2">"mountcryfs; mount-data"</span>
</pre></div>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="function-mount-data/index.html">Function: Mount Data</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="function-mount-data/index.html" rel="bookmark"><time class="published dt-published" datetime="2024-04-24T14:19:08-07:00" itemprop="datePublished" title="2024-04-24 14:19">2024-04-24 14:19</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<p>This is a function to mount one of the external encrypted USB drives that I use. It makes a lot of assumptions about names so it's pretty much an alias or shortcut, but sometimes things change so I added a little bit of flexibility to it and will try to document it enough that I can figure out what it's doing if I need to change (or fix) it.</p>
<div class="outline-2" id="outline-container-orgd950c8c">
<h2 id="orgd950c8c">The Function</h2>
<div class="outline-text-2" id="text-orgd950c8c">
<p>This is the function declaration. There's going to be three optional arguments that it might take.</p>
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-left">
<col class="org-left"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">Argument</th>
<th class="org-left" scope="col">Default</th>
<th class="org-left" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><i>device</i></td>
<td class="org-left"><code>sdb1</code></td>
<td class="org-left">Name of the device as shown by <code>fdisk -l</code> without the directory (<code>/dev/</code>)</td>
</tr>
<tr>
<td class="org-left"><i>name</i></td>
<td class="org-left"><code>monkeymount</code></td>
<td class="org-left">Name to use when opening the device</td>
</tr>
<tr>
<td class="org-left"><i>folder</i></td>
<td class="org-left"><code>irvin</code></td>
<td class="org-left">Place to mount the contents of the disk (without <code>/media/</code> at the beginning).</td>
</tr>
</tbody>
</table>
<p>So if I plug in the USB drive and it shows up at <code>/dev/sda1</code> and I decide that the mapped name will be "umma" and the folder will be "gumma". Then I</p>
<div class="highlight">
<pre><span></span><span class="k">function</span> mount-data --argument-names device name folder --description <span class="s2">"Mount an encrypted drive."</span>
    <span class="k">set</span> ERROR 1
</pre></div>
<p>The <code>ERROR</code> is a number to return in the event we bail on mounting the drive for some reason.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org6f42136">
<h2 id="org6f42136">The Parts</h2>
<div class="outline-text-2" id="text-org6f42136"></div>
<div class="outline-3" id="outline-container-org3f248eb">
<h3 id="org3f248eb">The Device</h3>
<div class="outline-text-3" id="text-org3f248eb">
<p>This is the name of the device in <code>/dev</code> that represents the drive to mount.</p>
<p>This command is useful sometimes. More so after it's been mounted.</p>
<div class="highlight">
<pre><span></span>lsblk -e7
</pre></div>
<p>This one is generally useful if you know the model of the drive.</p>
<div class="highlight">
<pre><span></span>sudo fdisk -l <span class="o">|</span> grep sd -A 1
</pre></div>
<div class="notecard" id="orgca5b9a0">
<p><b>Note to future self:</b> Consider making this an environment variable so you don't have to edit it if you switch USB ports.</p>
</div>
<div class="highlight">
<pre><span></span><span class="k">if</span> <span class="k">test</span> -z <span class="nv">$device</span>
    <span class="k">set</span> device <span class="s2">"sdb1"</span>
<span class="k">end</span>
</pre></div>
<p>We'll add the <code>/dev</code> to it (without checking that it's already there for now) and then make sure it's a valid block-device.</p>
<div class="highlight">
<pre><span></span><span class="k">set</span> DEVICE_PATH <span class="s2">"/dev/</span><span class="nv">$device</span><span class="s2">"</span>

<span class="k">if</span> <span class="k">not</span> <span class="k">test</span> -b <span class="nv">$DEVICE_PATH</span>
    <span class="k">echo</span> <span class="s2">"'</span><span class="nv">$DEVICE_PATH</span><span class="s2">' is not a valid block-device"</span>
    mount-data-help
    <span class="k">return</span> <span class="nv">$ERROR</span>
<span class="k">end</span>
</pre></div>
<p>To be nice we'll let the user know what we're using.</p>
<div class="highlight">
<pre><span></span><span class="k">echo</span> <span class="s2">"Using Device: </span><span class="nv">$DEVICE_PATH</span><span class="s2">"</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org24fee70">
<h3 id="org24fee70">The Mapping Name</h3>
<div class="outline-text-3" id="text-org24fee70">
<p>This is the name that will be put into <code>/dev/mapper/</code> which <code>mount</code> will use to mount the drive.</p>
<div class="highlight">
<pre><span></span><span class="k">if</span> <span class="k">test</span> -z <span class="nv">$name</span>
    <span class="k">set</span> name <span class="s2">"monkeymount"</span>
<span class="k">end</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">echo</span> <span class="s2">"Device Mapping: </span><span class="nv">$name</span><span class="s2">"</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org55f9ac0">
<h3 id="org55f9ac0">Mount Path</h3>
<div class="outline-text-3" id="text-org55f9ac0">
<p>Now we'll handle the folder where the drive will be mounted. If the user doesn't give one the default is "irvin".</p>
<div class="highlight">
<pre><span></span><span class="k">if</span> <span class="k">test</span> -z <span class="nv">$folder</span>
    <span class="k">set</span> folder <span class="s2">"irvin"</span>
<span class="k">end</span>
</pre></div>
<p>We'll assume that the folder is going inside the <code>/media/</code> folder and that only the final folder (or path below <code>/media/</code>) is being passed in.</p>
<div class="highlight">
<pre><span></span><span class="k">set</span> MOUNT_PATH <span class="s2">"/media/</span><span class="nv">$folder</span><span class="s2">"</span>
</pre></div>
<p>If there's already something in the folder then we won't try and mount it.</p>
<div class="highlight">
<pre><span></span><span class="k">if</span> <span class="k">set</span> COUNT <span class="o">(</span><span class="k">count</span> <span class="o">(</span>path normalize <span class="nv">$MOUNT_PATH</span>/*<span class="o">))</span>
    <span class="k">echo</span> <span class="s2">"</span><span class="nv">$MOUNT_PATH</span><span class="s2"> not empty, not mounting"</span>
    <span class="k">return</span> <span class="nv">$ERROR</span>
<span class="k">end</span>
</pre></div>
<p>If the folder doesn't exist we'll create it.</p>
<div class="highlight">
<pre><span></span><span class="k">if</span> <span class="k">not</span> <span class="k">test</span> -d <span class="nv">$MOUNT_PATH</span>
    <span class="k">echo</span> <span class="s2">"Creating '</span><span class="nv">$MOUNT_PATH</span><span class="s2">'"</span>
    sudo mkdir --parents <span class="nv">$MOUNT_PATH</span>
<span class="k">end</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">echo</span> <span class="s2">"Mounting at: </span><span class="nv">$MOUNT_PATH</span><span class="s2">"</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgbe9f49e">
<h3 id="orgbe9f49e">Mounting the Drive</h3>
<div class="outline-text-3" id="text-orgbe9f49e">
<p>First we'll use <code>cryptsetup</code> to decrypt the drive and put the mapping into <code>/dev/mapper/</code>.</p>
<div class="highlight">
<pre><span></span><span class="k">echo</span>
<span class="k">echo</span> <span class="s2">"Mounting External Data Drive"</span>

sudo cryptsetup <span class="nb">open</span> <span class="nv">$DEVICE_PATH</span> <span class="nv">$name</span>
</pre></div>
<p>Now we'll mount the device to a folder.</p>
<div class="highlight">
<pre><span></span>sudo mount /dev/mapper/<span class="nv">$name</span> <span class="nv">$MOUNT_PATH</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgcdfa7e3">
<h2 id="orgcdfa7e3">A Help Printer</h2>
<div class="outline-text-2" id="text-orgcdfa7e3">
<p>This is just a function to print a help string.</p>
<div class="highlight">
<pre><span></span><span class="k">function</span> mount-data-help
    <span class="k">echo</span> <span class="s2">"Mount an attached encrypted drive."</span>
    <span class="k">echo</span>
    <span class="k">echo</span> <span class="s2">"Usage: mount-data [device [name [folder]]]"</span>
    <span class="k">echo</span> <span class="s2">"    device: /dev/&lt;device block file&gt;"</span>
    <span class="k">echo</span> <span class="s2">"    name: /dev/wrapper/&lt;name&gt; to use"</span>
    <span class="k">echo</span> <span class="s2">"    folder: /media/&lt;folder&gt; to mount into"</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orge15a4ba">
<h2 id="orge15a4ba">Links</h2>
<div class="outline-text-2" id="text-orge15a4ba">
<ul class="org-ul">
<li><a href="https://fishshell.com/docs/current/cmds/not.html">fish Not</a>: Negate the exit status of a job (<code>test</code> in this case).</li>
<li><a href="https://fishshell.com/docs/current/cmds/test.html">fish test</a>: The <code>test</code> command.</li>
<li><a href="https://fishshell.com/docs/current/cmds/path.html#normalize-subcommand">Fish normalize path</a>: squash extra slashes and make it look like a valid path.</li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="cerberus-user-paths/index.html">Cerberus User Paths</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="cerberus-user-paths/index.html" rel="bookmark"><time class="published dt-published" datetime="2024-04-02T15:36:42-07:00" itemprop="datePublished" title="2024-04-02 15:36">2024-04-02 15:36</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="cerberus-user-paths/index.html#orge727859">Links</a></li>
</ul>
</div>
</div>
<p>This is a configuration to add to the fish <code>PATH</code>. The current version of fish uses a special command called <code>fish_add_path</code> when you want to add locations to the user path. If you just naively append to the PATH in the config file then fish will keep adding to the PATH every time you log in so the <code>fish_add_path</code> prevents adding paths that are already stored in the environment variable. Unfortunately the raspberry PI I'm using has Debian 11 which has fish version 3.1.2 which predates the <code>fish_add_path</code> command so I'll have to add to the path the old fashioned way.</p>
<p>The additions will be in <code>dingehaufen/conf.d/extra_paths.fish</code> which has to be then linked or copied into <code>/.config/fish/conf.d/</code>.</p>
<div class="highlight">
<pre><span></span>contains<span class="w"> </span><span class="nv">$HOME</span>/bin<span class="w"> </span><span class="nv">$fish_user_paths</span><span class="p">;</span><span class="w"> </span>or<span class="w"> </span><span class="nb">set</span><span class="w"> </span>--universal<span class="w"> </span>--append<span class="w"> </span>fish_user_paths<span class="w"> </span><span class="nv">$HOME</span>/bin
contains<span class="w"> </span><span class="nv">$HOME</span>/.local/bin<span class="w"> </span><span class="nv">$fish_user_paths</span><span class="p">;</span><span class="w"> </span>or<span class="w"> </span><span class="nb">set</span><span class="w"> </span>--universal<span class="w"> </span>--append<span class="w"> </span>fish_user_paths<span class="w"> </span><span class="nv">$HOME</span>/.local/bin
</pre></div>
<div class="outline-2" id="outline-container-orge727859">
<h2 id="orge727859">Links</h2>
<div class="outline-text-2" id="text-orge727859">
<ul class="org-ul">
<li><a href="https://stackoverflow.com/a/61882414">Stack Overflow</a>: Answer where I got the fish syntax.</li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="emacs-initel/index.html">Emacs init.el</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="emacs-initel/index.html" rel="bookmark"><time class="published dt-published" datetime="2024-04-02T13:29:37-07:00" itemprop="datePublished" title="2024-04-02 13:29">2024-04-02 13:29</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="emacs-initel/index.html#orga864b24">Tangle Source</a></li>
<li><a href="emacs-initel/index.html#org5ee3eb3">Package Management</a></li>
<li><a href="emacs-initel/index.html#org6761e80">Pyvenv</a></li>
<li><a href="emacs-initel/index.html#org1652da1">Emacs Settings</a>
<ul>
<li><a href="emacs-initel/index.html#org5d67fb9">File Locks</a></li>
<li><a href="emacs-initel/index.html#org9943cde">Toggle Input Mode</a></li>
</ul>
</li>
<li><a href="emacs-initel/index.html#org85f27c6">Tramp Mode</a>
<ul>
<li><a href="emacs-initel/index.html#orgb76c288">Use SSH</a></li>
<li><a href="emacs-initel/index.html#org9a7bd84">No Backups</a></li>
</ul>
</li>
<li><a href="emacs-initel/index.html#org5797e24">God Mode</a></li>
<li><a href="emacs-initel/index.html#orge62a42d">Python and elpy</a></li>
<li><a href="emacs-initel/index.html#orgc0671b8">Emacs Jupyter</a></li>
<li><a href="emacs-initel/index.html#org7104985">Fish</a></li>
<li><a href="emacs-initel/index.html#org1c86017">Org-mode</a></li>
<li><a href="emacs-initel/index.html#org0540dc8">org-export python mode</a></li>
<li><a href="emacs-initel/index.html#orgfddeac4">web-mode</a></li>
<li><a href="emacs-initel/index.html#org4b1bc28">auto-complete</a></li>
<li><a href="emacs-initel/index.html#orgc641d95">general text</a></li>
<li><a href="emacs-initel/index.html#orgd3c712f">javascript</a></li>
<li><a href="emacs-initel/index.html#orgadf662d">org-babel</a></li>
<li><a href="emacs-initel/index.html#org56cac75">Feature Mode</a></li>
<li><a href="emacs-initel/index.html#org51ad33f">yaml</a></li>
<li><a href="emacs-initel/index.html#org80228cc">Vue.js</a></li>
<li><a href="emacs-initel/index.html#org4547e18">Bats</a></li>
<li><a href="emacs-initel/index.html#org8ce13e9">Backups</a></li>
<li><a href="emacs-initel/index.html#org23b2f68">Markdown Mode</a></li>
<li><a href="emacs-initel/index.html#org2dd9068">Dockerfile Mode</a></li>
<li><a href="emacs-initel/index.html#org13a8923">Flycheck</a></li>
<li><a href="emacs-initel/index.html#org2f310b2">Keychain</a></li>
<li><a href="emacs-initel/index.html#orgb880344">Hideshow-Org</a></li>
</ul>
</div>
</div>
<p>This is an emacs configuration file. I had this in another repository and have been adding to it over the decades, occasionally removing things when troubleshooting but otherwise it's just a jumble right now, so I'm putting it in the fish-based repository to work on it.</p>
<p>The tangle creates a file <code>give-the-fish/dingehaufen/init.el</code> that you should copy or link into the right place <code>~/.emacs.d</code> right now.</p>
<div class="notecard" id="orga1db474">
<p>At some post I should look into breaking up the configuration (see <a href="https://emacs.stackexchange.com/a/18441">https://emacs.stackexchange.com/a/18441</a> for an example).</p>
</div>
<div class="outline-2" id="outline-container-orga864b24">
<h2 id="orga864b24">Tangle Source</h2>
<div class="outline-text-2" id="text-orga864b24">
<div class="highlight">
<pre><span></span><span class="nv">&lt;&lt;package-management&gt;&gt;</span>

<span class="nv">&lt;&lt;activate-pyvenv&gt;&gt;</span>

<span class="nv">&lt;&lt;org-mode&gt;&gt;</span>

<span class="c1">;; make sure org-babel comes before jupyter or any other code-based settings</span>
<span class="nv">&lt;&lt;org-babel&gt;&gt;</span>

<span class="nv">&lt;&lt;org-export-python&gt;&gt;</span>

<span class="nv">&lt;&lt;emacs-settings&gt;&gt;</span>

<span class="nv">&lt;&lt;emacs-file-locks&gt;&gt;</span>

<span class="nv">&lt;&lt;toggle-input-method&gt;&gt;</span>

<span class="c1">;; &lt;&lt;python-elpy&gt;&gt;</span>

<span class="p">(</span><span class="nf">custom-set-variables</span>
<span class="w">       </span><span class="c1">;; custom-set-variables was added by Custom.</span>
<span class="w">       </span><span class="c1">;; If you edit it by hand, you could mess it up, so be careful.</span>
<span class="w">       </span><span class="c1">;; Your init file should contain only one such instance.</span>
<span class="w">       </span><span class="c1">;; If there is more than one, they won't work right.</span>
<span class="w">       </span><span class="o">'</span><span class="p">(</span><span class="nv">js-indent-level</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">       </span><span class="o">'</span><span class="p">(</span><span class="nv">js2-basic-offset</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">       </span><span class="o">'</span><span class="p">(</span><span class="nv">js2-bounce-indent-p</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">       </span><span class="o">'</span><span class="p">(</span><span class="nv">org-export-backends</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="nv">ascii</span><span class="w"> </span><span class="nv">html</span><span class="w"> </span><span class="nv">icalendar</span><span class="w"> </span><span class="nv">latex</span><span class="w"> </span><span class="nv">org</span><span class="p">))</span>
<span class="w">       </span><span class="o">'</span><span class="p">(</span><span class="nv">package-selected-packages</span>
<span class="w">         </span><span class="p">(</span><span class="k">quote</span>
<span class="w">          </span><span class="p">(</span><span class="nf">htmlize</span><span class="w"> </span><span class="nv">ox-nikola</span><span class="w"> </span><span class="nv">ox-rst</span><span class="w"> </span><span class="nv">web-mode</span><span class="w"> </span><span class="nv">swiper</span><span class="w"> </span><span class="nv">smex</span><span class="w"> </span><span class="nv">paredit</span><span class="w"> </span><span class="nv">magit</span><span class="w"> </span><span class="nv">jedi</span><span class="w"> </span><span class="nv">ido-ubiquitous</span><span class="w"> </span><span class="nv">idle-highlight-mode</span><span class="w"> </span><span class="nv">god-mode</span><span class="w"> </span><span class="nv">fuzzy</span><span class="w"> </span><span class="nv">feature-mode</span><span class="w"> </span><span class="nv">csv-mode</span><span class="w"> </span><span class="nv">autopair</span><span class="w"> </span><span class="nv">ac-js2</span><span class="p">))))</span>

<span class="w">      </span><span class="p">(</span><span class="nf">custom-set-faces</span>
<span class="w">       </span><span class="c1">;; custom-set-faces was added by Custom.</span>
<span class="w">       </span><span class="c1">;; If you edit it by hand, you could mess it up, so be careful.</span>
<span class="w">       </span><span class="c1">;; Your init file should contain only one such instance.</span>
<span class="w">       </span><span class="c1">;; If there is more than one, they won't work right.</span>
<span class="w">       </span><span class="o">'</span><span class="p">(</span><span class="nv">rst-level-1</span><span class="w"> </span><span class="p">((</span><span class="nf">t</span><span class="w"> </span><span class="p">(</span><span class="nf">:background</span><span class="w"> </span><span class="s">"white"</span><span class="w"> </span><span class="nv">:foreground</span><span class="w"> </span><span class="s">"royal blue"</span><span class="p">))))</span>
<span class="w">       </span><span class="o">'</span><span class="p">(</span><span class="nv">rst-level-2</span><span class="w"> </span><span class="p">((</span><span class="nf">t</span><span class="w"> </span><span class="p">(</span><span class="nf">:background</span><span class="w"> </span><span class="s">"white"</span><span class="p">))))</span>
<span class="w">       </span><span class="o">'</span><span class="p">(</span><span class="nv">rst-level-3</span><span class="w"> </span><span class="p">((</span><span class="nf">t</span><span class="w"> </span><span class="p">(</span><span class="nf">:background</span><span class="w"> </span><span class="s">"cyan"</span><span class="p">))))</span>
<span class="w">       </span><span class="o">'</span><span class="p">(</span><span class="nv">rst-level-4</span><span class="w"> </span><span class="p">((</span><span class="nf">t</span><span class="w"> </span><span class="p">(</span><span class="nf">:background</span><span class="w"> </span><span class="s">"magenta"</span><span class="p">)))))</span>

<span class="w">      </span><span class="c1">;; rst minor-mode</span>
<span class="w">      </span><span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">turn-on-rst</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="nf">rst-minor-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">      </span><span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'python-mode-hook</span><span class="w"> </span><span class="ss">'turn-on-rst</span><span class="p">)</span>

<span class="w">      </span><span class="c1">;; hide-show mode</span>
<span class="w">      </span><span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">turn-on-hideshow</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="nf">hs-minor-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">      </span><span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'python-mode-hook</span><span class="w"> </span><span class="ss">'turn-on-hideshow</span><span class="p">)</span>

<span class="w">      </span><span class="c1">;; make no-tabs universal</span>
<span class="w">      </span><span class="p">(</span><span class="nf">setq-default</span><span class="w"> </span><span class="nv">indent-tabs-mode</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>

<span class="w">      </span><span class="c1">;; ipython shell</span>
<span class="w">      </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">python-shell-interpreter</span><span class="w"> </span><span class="s">"ipython"</span>
<span class="w">            </span><span class="nv">python-shell-interpreter-args</span><span class="w"> </span><span class="s">"-i"</span><span class="p">)</span>

<span class="w">      </span><span class="nv">&lt;&lt;web-mode&gt;&gt;</span>

<span class="w">      </span><span class="nv">&lt;&lt;auto-complete&gt;&gt;</span>

<span class="w">      </span><span class="p">(</span><span class="nf">define-global-minor-mode</span><span class="w"> </span><span class="nv">select-electric-pair-mode</span><span class="w"> </span><span class="nv">electric-pair-mode</span>
<span class="w">        </span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">()</span>
<span class="w">          </span><span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="p">(</span><span class="nb">memq</span><span class="w"> </span><span class="nv">major-mode</span>
<span class="w">                           </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="ss">'web-mode</span><span class="w"> </span><span class="ss">'js2-mode</span><span class="p">)))</span>
<span class="w">            </span><span class="p">(</span><span class="nf">electric-pair-mode</span><span class="p">))))</span>

<span class="w">      </span><span class="p">(</span><span class="nf">select-electric-pair-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="w">      </span><span class="c1">;; magit</span>
<span class="w">      </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">global-magit-file-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="w">      </span><span class="c1">;; setup the keybinding to launch magit</span>
<span class="w">      </span><span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-x g"</span><span class="p">)</span><span class="w"> </span><span class="ss">'magit-status</span><span class="p">)</span>

<span class="w">      </span><span class="nv">&lt;&lt;tramp-mode&gt;&gt;</span>

<span class="w">      </span><span class="nv">&lt;&lt;tramp-backups&gt;&gt;</span>

<span class="nv">&lt;&lt;god-mode&gt;&gt;</span>

<span class="nv">&lt;&lt;jupyter-emacs&gt;&gt;</span>

<span class="nv">&lt;&lt;general-text&gt;&gt;</span>

<span class="nv">&lt;&lt;javascript&gt;&gt;</span>

<span class="nv">&lt;&lt;feature-mode&gt;&gt;</span>

<span class="nv">&lt;&lt;emacs-gui&gt;&gt;</span>

<span class="nv">&lt;&lt;yaml&gt;&gt;</span>

<span class="c1">;; &lt;&lt;vue&gt;&gt;</span>

<span class="c1">;; &lt;&lt;bats&gt;&gt;</span>

<span class="nv">&lt;&lt;backups&gt;&gt;</span>

<span class="nv">&lt;&lt;no-sudo-backups&gt;&gt;</span>

<span class="c1">;; &lt;&lt;markdown-mode&gt;&gt;</span>

<span class="nv">&lt;&lt;dockerfile-mode&gt;&gt;</span>

<span class="nv">&lt;&lt;keychain&gt;&gt;</span>

<span class="nv">&lt;&lt;hideshow-org&gt;&gt;</span>

<span class="c1">;; &lt;&lt;flycheck-mypy&gt;&gt;</span>

<span class="nv">&lt;&lt;add-path&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org5ee3eb3">
<h2 id="org5ee3eb3">Package Management</h2>
<div class="outline-text-2" id="text-org5ee3eb3">
<div class="highlight">
<pre><span></span><span class="c1">;; emacs package management</span>
<span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'package</span><span class="p">)</span>

<span class="c1">;; add the repositories</span>
<span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'package-archives</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"melpa"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"https://melpa.org/packages/"</span><span class="p">)</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'package-archives</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"org"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"http://orgmode.org/elpa/"</span><span class="p">)</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>

<span class="c1">;; refresh the list</span>
<span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="nv">package-archive-contents</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">package-refresh-contents</span><span class="p">))</span>

<span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'use-package</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org6761e80">
<h2 id="org6761e80">Pyvenv</h2>
<div class="outline-text-2" id="text-org6761e80">
<p>To prevent errors when emacs starts up and tries to load jupyter (for emacs-jupyter) we need <code>jupyter</code> to be on the path. Now that debian and ubuntu don't want you to install python packages globally we need another way. I had installed it with <a href="https://github.com/pypa/pipx">pipx</a>, which does work, but pipx doesn't doesn't install standalone libraries and sometimes breaks when trying to install dependencies so I think for this case it's better to avoid it and instead use a virtual-environment. Since it has to be activated before anything else that uses python packages, activating the environment should be put fairly early on in the <code>init.el</code> file.</p>
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'pyvenv</span><span class="p">)</span>
<span class="p">(</span><span class="nf">pyvenv-activate</span><span class="w"> </span><span class="s">"~/.virtualenvs/emacs-environment/"</span><span class="p">)</span>
</pre></div>
<p>This assumes that there's a virtual-environment named <code>emacs-environment</code> setup (with jupyter at least). Note that you could load <code>elpy</code> instead of just <code>pyvenv</code> by itself, but <code>elpy</code> is giving me errors (or at least lots of warnings) when it loads and I don't feel like troubleshooting it right now, since it doesn't play well with org-mode anyway.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org1652da1">
<h2 id="org1652da1">Emacs Settings</h2>
<div class="outline-text-2" id="text-org1652da1">
<div class="highlight">
<pre><span></span><span class="c1">;; show column-numbers</span>
<span class="p">(</span><span class="nf">column-number-mode</span><span class="p">)</span>

<span class="c1">;; show matching parentheses</span>
<span class="p">(</span><span class="nf">show-paren-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">show-paren-delay</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>

<span class="c1">;; global parentheses matching (`autopair` package needs to be installed)</span>
<span class="p">(</span><span class="nf">electric-pair-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="c1">;; turn off auto-fill mode</span>
<span class="p">(</span><span class="nf">remove-hook</span><span class="w"> </span><span class="ss">'text-mode-hook</span><span class="w"> </span><span class="o">#</span><span class="ss">'turn-on-auto-fill</span><span class="p">)</span>

<span class="c1">;; hide menu-bar by default</span>
<span class="p">(</span><span class="nf">menu-bar-mode</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span>

<span class="c1">;; hide the toolbar</span>
<span class="p">(</span><span class="nf">tool-bar-mode</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span>

<span class="c1">;; disable the scrollbar</span>
<span class="p">(</span><span class="nf">toggle-scroll-bar</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span>

<span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'default-frame-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="nv">background-color</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"white"</span><span class="p">))</span>
<span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'default-frame-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="nv">foreground-color</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"black"</span><span class="p">))</span>

<span class="c1">;; dark slate blue</span>
<span class="c1">;; (add-to-list 'default-frame-alist '(cursor-color . "#483D8B"))</span>
<span class="c1">;; dark red</span>
<span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'default-frame-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="nv">cursor-color</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"#8B0000"</span><span class="p">))</span>

<span class="c1">;; Disable Bell</span>
<span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">ring-bell-function</span><span class="w"> </span><span class="ss">'ignore</span><span class="p">)</span>
</pre></div>
</div>
<div class="outline-3" id="outline-container-org5d67fb9">
<h3 id="org5d67fb9">File Locks</h3>
<div class="outline-text-3" id="text-org5d67fb9">
<p>A lock got corrupted once in the cryfs directory, making the editing file unreadable. You can fix it by copying everything but the corrupted file out, destroying and re-creating the cryfs mount and copying the files back in, but hopefully this will fix it. It does mean that two people could edit the same file and cause problems, but oh, well.</p>
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">create-lockfiles</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org9943cde">
<h3 id="org9943cde">Toggle Input Mode</h3>
<div class="outline-text-3" id="text-org9943cde">
<p>This allows you to switch to latex input and then back using <code>C-\</code>. This is useful to embed special characters. Although you could probably just do the same thing with math mode if you want to wait until exporting.</p>
<div class="highlight">
<pre><span></span><span class="c1">;; (setq default-input-method "TeX")</span>
<span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">default-input-method</span><span class="w"> </span><span class="s">"TeX"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org85f27c6">
<h2 id="org85f27c6">Tramp Mode</h2>
<div class="outline-text-2" id="text-org85f27c6"></div>
<div class="outline-3" id="outline-container-orgb76c288">
<h3 id="orgb76c288">Use SSH</h3>
<div class="outline-text-3" id="text-orgb76c288">
<div class="highlight">
<pre><span></span><span class="c1">;; tramp mode</span>
<span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">tramp-default-method</span><span class="w"> </span><span class="s">"ssh"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org9a7bd84">
<h3 id="org9a7bd84">No Backups</h3>
<div class="outline-text-3" id="text-org9a7bd84">
<p>This is from the <a href="https://www.gnu.org/software/emacs/manual/html_node/tramp/Auto_002dsave-File-Lock-and-Backup.html">emacs manual</a>.</p>
</div>
<div class="outline-4" id="outline-container-org5709497">
<h4 id="org5709497">Turn Off For Tramp Only</h4>
<div class="outline-text-4" id="text-org5709497">
<p>The configuration is currently saving backups to a local directory, so when I use tramp I get warnings about it. It doesn't tell you why but according to the <a href="https://www.gnu.org/software/emacs/manual/html_node/tramp/Auto_002dsave-File-Lock-and-Backup.html">emacs wiki</a> this is a potential security leak (although probably not in the way I'm using it). Anyway, I've never used the backups so I'll just disable them for tramp.</p>
<div class="highlight">
<pre><span></span><span class="c1">;; disable tramp-backups</span>
<span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'backup-directory-alist</span>
<span class="w">             </span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="nv">tramp-file-name-regexp</span><span class="w"> </span><span class="nv">nil</span><span class="p">))</span>
</pre></div>
<div class="notecard" id="org39a6e51">
<p><b>Note:</b> This turns out to solve the wrong problem so I added another rule in the next section.</p>
</div>
</div>
</div>
<div class="outline-4" id="outline-container-org17aa169">
<h4 id="org17aa169">Turn Off For Sudo</h4>
<div class="outline-text-4" id="text-org17aa169">
<p>Turning off the backups for tramp only fixed one case, but it turned out that the thing that made me look into this was using <code>sudo</code> on my local machine to opne the <code>/etc/hosts</code> file so I was actually solving the wrong (or only part of the) problem. This next bit is supposed to turn off all backups where you use <code>sudo</code>. So it probably doesn't belong under tramp any more. Maybe I'll move it later</p>
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">backup-enable-predicate</span>
<span class="w">      </span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">(</span><span class="nf">name</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="k">and</span><span class="w"> </span><span class="p">(</span><span class="nf">normal-backup-enable-predicate</span><span class="w"> </span><span class="nv">name</span><span class="p">)</span>
<span class="w">             </span><span class="p">(</span><span class="nb">not</span>
<span class="w">              </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">method</span><span class="w"> </span><span class="p">(</span><span class="nf">file-remote-p</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="ss">'method</span><span class="p">)))</span>
<span class="w">                </span><span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="nf">stringp</span><span class="w"> </span><span class="nv">method</span><span class="p">)</span>
<span class="w">                  </span><span class="p">(</span><span class="nb">member</span><span class="w"> </span><span class="nv">method</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"su"</span><span class="w"> </span><span class="s">"sudo"</span><span class="p">))))))))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org5797e24">
<h2 id="org5797e24">God Mode</h2>
<div class="outline-text-2" id="text-org5797e24">
<div class="highlight">
<pre><span></span><span class="c1">;; god-mode</span>
<span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'god-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"&lt;escape&gt;"</span><span class="p">)</span><span class="w"> </span><span class="ss">'god-mode-all</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-$"</span><span class="p">)</span><span class="w"> </span><span class="ss">'god-mode-all</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"&lt;Scroll_Lock&gt;"</span><span class="p">)</span><span class="w"> </span><span class="ss">'god-mode-all</span><span class="p">)</span>
<span class="p">(</span><span class="nf">define-key</span><span class="w"> </span><span class="nv">god-local-mode-map</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"."</span><span class="p">)</span><span class="w"> </span><span class="ss">'repeat</span><span class="p">)</span>

<span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">god-exempt-major-modes</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">god-exempt-predicates</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>

<span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">my-update-cursor</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">cursor-type</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="nv">god-local-mode</span><span class="w"> </span><span class="nv">buffer-read-only</span><span class="p">)</span>
<span class="w">                        </span><span class="ss">'box</span>
<span class="w">                      </span><span class="ss">'bar</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">c/god-mode-update-cursor</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nf">limited-colors-p</span><span class="w"> </span><span class="p">(</span><span class="nb">&gt;</span><span class="w"> </span><span class="mi">257</span><span class="w"> </span><span class="p">(</span><span class="nb">length</span><span class="w"> </span><span class="p">(</span><span class="nf">defined-colors</span><span class="p">)))))</span>
<span class="w">    </span><span class="p">(</span><span class="k">cond</span><span class="w"> </span><span class="p">(</span><span class="nf">god-local-mode</span><span class="w"> </span><span class="p">(</span><span class="nf">progn</span>
<span class="w">                            </span><span class="p">(</span><span class="nf">set-face-background</span><span class="w"> </span><span class="ss">'mode-line</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="nv">limited-colors-p</span><span class="w"> </span><span class="s">"white"</span><span class="w"> </span><span class="s">"#e9e2cb"</span><span class="p">))</span>
<span class="w">                            </span><span class="p">(</span><span class="nf">set-face-background</span><span class="w"> </span><span class="ss">'mode-line-inactive</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="nv">limited-colors-p</span><span class="w"> </span><span class="s">"white"</span><span class="w"> </span><span class="s">"#e9e2cb"</span><span class="p">))))</span>
<span class="w">          </span><span class="p">(</span><span class="nf">t</span><span class="w"> </span><span class="p">(</span><span class="nf">progn</span>
<span class="w">               </span><span class="p">(</span><span class="nf">set-face-background</span><span class="w"> </span><span class="ss">'mode-line</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="nv">limited-colors-p</span><span class="w"> </span><span class="s">"black"</span><span class="w"> </span><span class="s">"#0a2832"</span><span class="p">))</span>
<span class="w">               </span><span class="p">(</span><span class="nf">set-face-background</span><span class="w"> </span><span class="ss">'mode-line-inactive</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="nv">limited-colors-p</span><span class="w"> </span><span class="s">"black"</span><span class="w"> </span><span class="s">"#0a2832"</span><span class="p">)))))))</span>

<span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'god-mode-enabled-hook</span><span class="w"> </span><span class="ss">'my-update-cursor</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'god-mode-disabled-hook</span><span class="w"> </span><span class="ss">'my-update-cursor</span><span class="p">)</span>

<span class="c1">;; window bindings for god-mode</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-x C-o"</span><span class="p">)</span><span class="w"> </span><span class="ss">'other-window</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-x C-1"</span><span class="p">)</span><span class="w"> </span><span class="ss">'delete-other-windows</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-x C-2"</span><span class="p">)</span><span class="w"> </span><span class="ss">'split-window-below</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-x C-3"</span><span class="p">)</span><span class="w"> </span><span class="ss">'split-window-right</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-x C-0"</span><span class="p">)</span><span class="w"> </span><span class="ss">'delete-window</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-x C-B"</span><span class="p">)</span><span class="w"> </span><span class="ss">'switch-to-buffer</span><span class="p">)</span>

<span class="c1">;; allow using 's' and 'r' for repeated searches</span>
<span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'god-mode-isearch</span><span class="p">)</span>
<span class="p">(</span><span class="nf">define-key</span><span class="w"> </span><span class="nv">isearch-mode-map</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"&lt;escape&gt;"</span><span class="p">)</span><span class="w"> </span><span class="ss">'god-mode-isearch-activate</span><span class="p">)</span>
<span class="p">(</span><span class="nf">define-key</span><span class="w"> </span><span class="nv">god-mode-isearch-map</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"&lt;escape&gt;"</span><span class="p">)</span><span class="w"> </span><span class="ss">'god-mode-isearch-disable</span><span class="p">)</span>

<span class="p">(</span><span class="nf">define-key</span><span class="w"> </span><span class="nv">god-local-mode-map</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"."</span><span class="p">)</span><span class="w"> </span><span class="ss">'repeat</span><span class="p">)</span>
<span class="c1">;; set a default virtual environment</span>
<span class="p">(</span><span class="nf">pyvenv-activate</span><span class="w"> </span><span class="s">"~/.virtualenvs/emacs"</span><span class="p">)</span>

<span class="c1">;; hide-show is broken by god mode.</span>
<span class="c1">;; this adds universal quick and dirty code-folding that works</span>
<span class="p">(</span><span class="nf">defvar</span><span class="w"> </span><span class="nv">hs-special-modes-alist</span>
<span class="w">  </span><span class="p">(</span><span class="nf">mapcar</span><span class="w"> </span><span class="ss">'purecopy</span>
<span class="w">          </span><span class="o">'</span><span class="p">((</span><span class="nf">c-mode</span><span class="w"> </span><span class="s">"{"</span><span class="w"> </span><span class="s">"}"</span><span class="w"> </span><span class="s">"/[*/]"</span><span class="w"> </span><span class="nv">nil</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>
<span class="w">            </span><span class="p">(</span><span class="nf">c++-mode</span><span class="w"> </span><span class="s">"{"</span><span class="w"> </span><span class="s">"}"</span><span class="w"> </span><span class="s">"/[*/]"</span><span class="w"> </span><span class="nv">nil</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>
<span class="w">            </span><span class="p">(</span><span class="nf">bibtex-mode</span><span class="w"> </span><span class="p">(</span><span class="s">"@</span><span class="se">\\</span><span class="s">S(*</span><span class="se">\\</span><span class="s">(</span><span class="se">\\</span><span class="s">s(</span><span class="se">\\</span><span class="s">)"</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">            </span><span class="p">(</span><span class="nf">java-mode</span><span class="w"> </span><span class="s">"{"</span><span class="w"> </span><span class="s">"}"</span><span class="w"> </span><span class="s">"/[*/]"</span><span class="w"> </span><span class="nv">nil</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>
<span class="w">            </span><span class="p">(</span><span class="nf">js2-mode</span><span class="w"> </span><span class="s">"{"</span><span class="w"> </span><span class="s">"}"</span><span class="w"> </span><span class="s">"/[*/]"</span><span class="w"> </span><span class="nv">nil</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">toggle-selective-display</span><span class="w"> </span><span class="p">(</span><span class="nf">column</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">interactive</span><span class="w"> </span><span class="s">"P"</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">set-selective-display</span>
<span class="w">   </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="nv">column</span>
<span class="w">       </span><span class="p">(</span><span class="k">unless</span><span class="w"> </span><span class="nv">selective-display</span>
<span class="w">         </span><span class="p">(</span><span class="nb">1+</span><span class="w"> </span><span class="p">(</span><span class="nf">current-column</span><span class="p">))))))</span>

<span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">toggle-hiding</span><span class="w"> </span><span class="p">(</span><span class="nf">column</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">interactive</span><span class="w"> </span><span class="s">"P"</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="nv">hs-minor-mode</span>
<span class="w">      </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">condition-case</span><span class="w"> </span><span class="nv">nil</span>
<span class="w">              </span><span class="p">(</span><span class="nf">hs-toggle-hiding</span><span class="p">)</span>
<span class="w">            </span><span class="p">(</span><span class="nb">error</span><span class="w"> </span><span class="nv">t</span><span class="p">))</span>
<span class="w">          </span><span class="p">(</span><span class="nf">hs-show-all</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nf">toggle-selective-display</span><span class="w"> </span><span class="nv">column</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">load-library</span><span class="w"> </span><span class="s">"hideshow"</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-+"</span><span class="p">)</span><span class="w"> </span><span class="ss">'toggle-hiding</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-|"</span><span class="p">)</span><span class="w"> </span><span class="ss">'toggle-selective-display</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'java-mode-hook</span><span class="w">       </span><span class="ss">'hs-minor-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'sh-mode-hook</span><span class="w">         </span><span class="ss">'hs-minor-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'js2-mode-hook</span><span class="w">         </span><span class="ss">'hs-minor-mode</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orge62a42d">
<h2 id="orge62a42d">Python and elpy</h2>
<div class="outline-text-2" id="text-orge62a42d">
<div class="highlight">
<pre><span></span><span class="w">  </span><span class="c1">;; elpy</span>
<span class="p">(</span><span class="nf">use-package</span><span class="w"> </span><span class="nv">elpy</span>
<span class="w">  </span><span class="nv">:ensure</span><span class="w"> </span><span class="nv">t</span>
<span class="w">  </span><span class="nv">:defer</span><span class="w"> </span><span class="nv">t</span>
<span class="w">  </span><span class="nv">:init</span>
<span class="w">  </span><span class="p">(</span><span class="nf">advice-add</span><span class="w"> </span><span class="ss">'python-mode</span><span class="w"> </span><span class="nv">:before</span><span class="w"> </span><span class="ss">'elpy-enable</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.py"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">python-mode</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgc0671b8">
<h2 id="orgc0671b8">Emacs Jupyter</h2>
<div class="outline-text-2" id="text-orgc0671b8">
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="n">org</span><span class="o">-</span><span class="n">babel</span><span class="o">-</span><span class="n">jupyter</span><span class="o">-</span><span class="n">override</span><span class="o">-</span><span class="n">src</span><span class="o">-</span><span class="n">block</span> <span class="s2">"python"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org7104985">
<h2 id="org7104985">Fish</h2>
<div class="outline-text-2" id="text-org7104985">
<div class="highlight">
<pre><span></span><span class="c1">;; fish functions</span>
<span class="o">'</span><span class="p">(</span><span class="nv">sh-basic-offset</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="o">'</span><span class="p">(</span><span class="nv">sh-indentation</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">auto-mode-alist</span><span class="w"> </span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.fish$"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">shell-script-mode</span><span class="p">)</span><span class="w"> </span><span class="nv">auto-mode-alist</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org1c86017">
<h2 id="org1c86017">Org-mode</h2>
<div class="outline-text-2" id="text-org1c86017">
<div class="highlight">
<pre><span></span><span class="w">  </span><span class="c1">;; org-mode</span>
<span class="w">  </span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'org</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">define-key</span><span class="w"> </span><span class="nv">global-map</span><span class="w"> </span><span class="s">"</span><span class="se">\C</span><span class="s">-cl"</span><span class="w"> </span><span class="ss">'org-store-link</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">define-key</span><span class="w"> </span><span class="nv">global-map</span><span class="w"> </span><span class="s">"</span><span class="se">\C</span><span class="s">-ca"</span><span class="w"> </span><span class="ss">'org-agenda</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-log-done</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; org-mode agendas</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-agenda-files</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="s">"~/documents/roku-chiji/repository/kanban.org"</span><span class="p">))</span>

<span class="w">  </span><span class="c1">;; org-capture</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-default-notes-file</span><span class="w"> </span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="s">"~/documents/roku-chiji/repository/"</span><span class="w"> </span><span class="s">"bugs.org"</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">define-key</span><span class="w"> </span><span class="nv">global-map</span><span class="w"> </span><span class="s">"</span><span class="se">\C</span><span class="s">-cc"</span><span class="w"> </span><span class="ss">'org-capture</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-capture-templates</span>
<span class="w">        </span><span class="o">'</span><span class="p">((</span><span class="s">"b"</span><span class="w"> </span><span class="s">"Bug"</span><span class="w"> </span><span class="nv">entry</span><span class="w"> </span><span class="p">(</span><span class="nf">file+headline</span><span class="w"> </span><span class="s">"~/documents/roku-chiji/repository/bugs.org"</span><span class="w"> </span><span class="s">"Bugs"</span><span class="p">)</span>
<span class="w">           </span><span class="s">"* BUG %?</span><span class="se">\n</span><span class="s">  %i</span><span class="se">\n</span><span class="s">  %a"</span><span class="p">)))</span>

<span class="w">  </span><span class="c1">;; todo-state names</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-todo-keywords</span>
<span class="w">          </span><span class="o">'</span><span class="p">((</span><span class="nf">sequence</span><span class="w"> </span><span class="s">"TOMORROW"</span><span class="w"> </span><span class="s">"TODAY"</span><span class="w"> </span><span class="s">"DOING"</span><span class="w"> </span><span class="s">"|"</span><span class="w"> </span><span class="s">"DONE"</span><span class="p">)))</span>

<span class="w">  </span><span class="c1">;; org clean-outlines</span>

<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-startup-indented</span><span class="w"> </span><span class="nv">t</span>
<span class="w">        </span><span class="nv">org-hide-leading-stars</span><span class="w"> </span><span class="nv">t</span>
<span class="w">        </span><span class="nv">org-indent-indentation-per-level</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; word-wrap</span>
<span class="w">  </span><span class="p">(</span><span class="nf">global-visual-line-mode</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; start the calendar on monday</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">calendar-week-start-day</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; start with outline folded</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-startup-folded</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org0540dc8">
<h2 id="org0540dc8">org-export python mode</h2>
<div class="outline-text-2" id="text-org0540dc8">
<p>This just stops emitting the message that emacs is using a default 4 spaces when exporting python.</p>
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">python-indent-guess-indent-offset</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span><span class="w">  </span>
<span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">python-indent-guess-indent-offset-verbose</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgfddeac4">
<h2 id="orgfddeac4">web-mode</h2>
<div class="outline-text-2" id="text-orgfddeac4">
<div class="highlight">
<pre><span></span><span class="w">  </span><span class="c1">;; web-mode</span>
<span class="w">  </span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'web-mode</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.html?</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">web-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.tmpl</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">web-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.phtml</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">web-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.tpl</span><span class="se">\\</span><span class="s">.php</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">web-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.[agj]sp</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">web-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.as[cp]x</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">web-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.erb</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">web-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.mustache</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">web-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.djhtml</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">web-mode</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">defun</span><span class="w"> </span><span class="nv">my-web-mode-hook</span><span class="w"> </span><span class="p">()</span>
<span class="w">    </span><span class="s">"Hooks for Web mode."</span>
<span class="w">    </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">web-mode-markup-indent-offset</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">web-mode-css-indent-offset</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">web-mode-code-indent-offset</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">web-mode-enable-current-column-highlight</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">web-mode-enable-current-element-highlight</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">web-mode-engines-alist</span>
<span class="w">        </span><span class="o">'</span><span class="p">((</span><span class="s">"jinja"</span><span class="w">    </span><span class="o">.</span><span class="w"> </span><span class="s">"</span><span class="se">\\</span><span class="s">.html</span><span class="se">\\</span><span class="s">'"</span><span class="p">))</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'web-mode-hook</span><span class="w">  </span><span class="ss">'my-web-mode-hook</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org4b1bc28">
<h2 id="org4b1bc28">auto-complete</h2>
<div class="outline-text-2" id="text-org4b1bc28">
<div class="highlight">
<pre><span></span><span class="w">  </span><span class="c1">;; auto-complete</span>
<span class="w">  </span><span class="c1">;; (defun turn-on-autocomplete () (auto-complete-mode 1))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'load-path</span><span class="w"> </span><span class="s">"~/.emacs.d/lisp"</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'auto-complete-config</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'ac-dictionary-directories</span><span class="w"> </span><span class="s">"~/.emacs.d/ac-dict"</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">ac-config-default</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">defadvice</span><span class="w"> </span><span class="nv">auto-complete-mode</span><span class="w"> </span><span class="p">(</span><span class="nf">around</span><span class="w"> </span><span class="nv">disable-auto-complete-for-python</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="k">unless</span><span class="w"> </span><span class="p">(</span><span class="nf">eq</span><span class="w"> </span><span class="nv">major-mode</span><span class="w"> </span><span class="ss">'python-mode</span><span class="p">)</span><span class="w"> </span><span class="nv">ad-do-it</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgc641d95">
<h2 id="orgc641d95">general text</h2>
<div class="outline-text-2" id="text-orgc641d95">
<div class="highlight">
<pre><span></span><span class="c1">;; increase/decrease text size</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-c C-+"</span><span class="p">)</span><span class="w"> </span><span class="ss">'text-scale-increase</span><span class="p">)</span>
<span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C--"</span><span class="p">)</span><span class="w"> </span><span class="ss">'text-scale-decrease</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgd3c712f">
<h2 id="orgd3c712f">javascript</h2>
<div class="outline-text-2" id="text-orgd3c712f">
<div class="highlight">
<pre><span></span><span class="c1">;; js2</span>
<span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.js</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">js2-mode</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgadf662d">
<h2 id="orgadf662d">org-babel</h2>
<div class="outline-text-2" id="text-orgadf662d">
<div class="highlight">
<pre><span></span><span class="w">  </span><span class="c1">;; org-babel</span>
<span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'ob-js</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'org-src-lang-modes</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"rst"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"rst"</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'org-src-lang-modes</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"feature"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"feature"</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'org-src-lang-modes</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"org"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"org"</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'org-src-lang-modes</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"css"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"css"</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'org-src-lang-modes</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"plantuml"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"plantuml"</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'org-src-lang-modes</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"conf"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"conf"</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">org-babel-do-load-languages</span>
<span class="w">   </span><span class="ss">'org-babel-load-languages</span>
<span class="w">   </span><span class="o">'</span><span class="p">(</span>
<span class="w">     </span><span class="p">(</span><span class="nf">plantuml</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">     </span><span class="p">(</span><span class="nf">shell</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">     </span><span class="p">(</span><span class="nf">emacs-lisp</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">     </span><span class="p">(</span><span class="nf">latex</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">     </span><span class="p">(</span><span class="nf">org</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">     </span><span class="p">(</span><span class="nf">js</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">     </span><span class="p">(</span><span class="nf">jupyter</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">     </span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-plantuml-jar-path</span><span class="w"> </span><span class="p">(</span><span class="nf">expand-file-name</span><span class="w"> </span><span class="s">"/usr/share/java/plantuml.jar"</span><span class="p">))</span>

<span class="w">  </span><span class="c1">;; Don't treat underscores as sub-script notation</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-export-with-sub-superscripts</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; Don't re-evaluate the source blocks before exporting</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-export-babel-evaluate</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; don't confirm block evaluation</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-confirm-babel-evaluate</span><span class="w"> </span><span class="nv">nil</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;;; display/update images in the buffer after evaluation</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'org-babel-after-execute-hook</span><span class="w"> </span><span class="ss">'org-display-inline-images</span><span class="w"> </span><span class="ss">'append</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; noweb expansion only when you tangle</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-babel-default-header-args</span>
<span class="w">        </span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="nv">:noweb</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"tangle"</span><span class="p">)</span>
<span class="w">              </span><span class="p">(</span><span class="nf">assq-delete-all</span><span class="w"> </span><span class="nv">:noweb</span><span class="w"> </span><span class="nv">org-babel-default-header-args</span><span class="p">))</span>
<span class="w">        </span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; syntax highlighting in org-files</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-src-fontify-natively</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; export org to rst</span>
<span class="w">  </span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'ox-rst</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; export org to nikola</span>
<span class="w">  </span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'ox-nikola</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; export to latex/pdf</span>
<span class="w">  </span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'ox-latex</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; syntax-highlighting for pdf's</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'org-latex-packages-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">""</span><span class="w"> </span><span class="s">"minted"</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-latex-listings</span><span class="w"> </span><span class="ss">'minted</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-latex-pdf-process</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"</span><span class="p">))</span>

<span class="w">  </span><span class="c1">;; let the user set the indentation so you can insert text between methods in classes.</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">org-src-preserve-indentation</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>

<span class="w">  </span><span class="c1">;; pygmentize ipython</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'org-latex-minted-langs</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="nv">ipython</span><span class="w"> </span><span class="s">"python"</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org56cac75">
<h2 id="org56cac75">Feature Mode</h2>
<div class="outline-text-2" id="text-org56cac75">
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.feature"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">feature-mode</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org51ad33f">
<h2 id="org51ad33f">yaml</h2>
<div class="outline-text-2" id="text-org51ad33f">
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'yaml-mode-hook</span>
<span class="w">          </span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">()</span>
<span class="w">            </span><span class="p">(</span><span class="nf">define-key</span><span class="w"> </span><span class="nv">yaml-mode-map</span><span class="w"> </span><span class="s">"</span><span class="se">\C</span><span class="s">-m"</span><span class="w"> </span><span class="ss">'newline-and-indent</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org80228cc">
<h2 id="org80228cc">Vue.js</h2>
<div class="outline-text-2" id="text-org80228cc">
<div class="highlight">
<pre><span></span><span class="c1">;; setup files ending in “.vue” to open in vue-mode</span>
<span class="c1">;; (add-to-list 'auto-mode-alist '("\\.vue\\'" . vue-mode))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org4547e18">
<h2 id="org4547e18">Bats</h2>
<div class="outline-text-2" id="text-org4547e18">
<p>The Bash Automated Test System mode.</p>
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-left">
<col class="org-left"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">Keybinding</th>
<th class="org-left" scope="col">Description</th>
<th class="org-left" scope="col">State</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">C-c C-a</td>
<td class="org-left">Run all bat-files in the current directory</td>
<td class="org-left">Works</td>
</tr>
<tr>
<td class="org-left">C-c C-,</td>
<td class="org-left">Run all the tests in the current buffer</td>
<td class="org-left">Works</td>
</tr>
<tr>
<td class="org-left">C-c M-,</td>
<td class="org-left">Run the test where the cursor is</td>
<td class="org-left">Doesn't Work</td>
</tr>
</tbody>
</table>
<p>There's a ticket on github to add this feature (?) to bats, but the old developers stopped supporting it and I don't know if the fork has it yet. It isn't working if you install bats from Ubuntu's repositories as of Bionic Beaver.</p>
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.bat</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">bats-mode</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org8ce13e9">
<h2 id="org8ce13e9">Backups</h2>
<div class="outline-text-2" id="text-org8ce13e9">
<p>From the <a href="https://www.emacswiki.org/emacs/BackupDirectory">Emacs Wiki</a>.</p>
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">backup-directory-alist</span><span class="w"> </span>
<span class="w">      </span><span class="o">'</span><span class="p">((</span><span class="s">"."</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">"/tmp/"</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">auto-save-file-name-transforms</span>
<span class="w">      </span><span class="o">`</span><span class="p">((</span><span class="s">".*"</span><span class="w"> </span><span class="o">,</span><span class="w"> </span><span class="s">"/tmp/"</span><span class="w"> </span><span class="nv">t</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org23b2f68">
<h2 id="org23b2f68">Markdown Mode</h2>
<div class="outline-text-2" id="text-org23b2f68">
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="nf">use-package</span><span class="w"> </span><span class="nv">markdown-mode</span>
<span class="w"> </span><span class="nv">:ensure</span><span class="w"> </span><span class="nv">t</span>
<span class="w"> </span><span class="nv">:mode</span><span class="w"> </span><span class="p">((</span><span class="s">"README</span><span class="se">\\</span><span class="s">.md</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">gfm-mode</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.md</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">markdown-mode</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">.markdown</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">markdown-mode</span><span class="p">))</span>
<span class="w"> </span><span class="nv">:init</span><span class="w"> </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">markdown-command</span><span class="w"> </span><span class="s">"pandoc"</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org2dd9068">
<h2 id="org2dd9068">Dockerfile Mode</h2>
<div class="outline-text-2" id="text-org2dd9068">
<div class="highlight">
<pre><span></span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="ss">'dockerfile-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"Dockerfile</span><span class="se">\\</span><span class="s">'"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">dockerfile-mode</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org13a8923">
<h2 id="org13a8923">Flycheck</h2>
<div class="outline-text-2" id="text-org13a8923">
<div class="highlight">
<pre><span></span><span class="c1">;; flycheck</span>
<span class="p">(</span><span class="nf">use-package</span><span class="w"> </span><span class="nv">flycheck</span>
<span class="w">  </span><span class="nv">:ensure</span><span class="w"> </span><span class="nv">t</span>
<span class="w">  </span><span class="nv">:config</span>
<span class="w">  </span><span class="p">(</span><span class="nf">global-flycheck-mode</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">  </span><span class="c1">;; note that these bindings are optional</span>
<span class="w">  </span><span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-c n"</span><span class="p">)</span><span class="w"> </span><span class="ss">'flycheck-next-error</span><span class="p">)</span>
<span class="w">  </span><span class="c1">;; this might override a default binding for running a python process,</span>
<span class="w">  </span><span class="c1">;; see comments below this answer</span>
<span class="w">  </span><span class="p">(</span><span class="nf">global-set-key</span><span class="w"> </span><span class="p">(</span><span class="nf">kbd</span><span class="w"> </span><span class="s">"C-c p"</span><span class="p">)</span><span class="w"> </span><span class="ss">'flycheck-prev-error</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
<span class="c1">;; flycheck-pycheckers</span>
<span class="c1">;; Allows multiple syntax checkers to run in parallel on Python code</span>
<span class="c1">;; Ideal use-case: pyflakes for syntax combined with mypy for typing</span>
<span class="p">(</span><span class="nf">use-package</span><span class="w"> </span><span class="nv">flycheck-pycheckers</span>
<span class="w">  </span><span class="nv">:after</span><span class="w"> </span><span class="nv">flycheck</span>
<span class="w">  </span><span class="nv">:ensure</span><span class="w"> </span><span class="nv">t</span>
<span class="w">  </span><span class="nv">:init</span>
<span class="w">  </span><span class="p">(</span><span class="nf">with-eval-after-load</span><span class="w"> </span><span class="ss">'flycheck</span>
<span class="w">    </span><span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'flycheck-mode-hook</span><span class="w"> </span><span class="o">#</span><span class="ss">'flycheck-pycheckers-setup</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">flycheck-pycheckers-checkers</span>
<span class="w">    </span><span class="o">'</span><span class="p">(</span>
<span class="w">      </span><span class="nv">mypy3</span>
<span class="w">      </span><span class="nv">pyflakes</span>
<span class="w">      </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
<span class="c1">;; elpy</span>
<span class="p">(</span><span class="nf">use-package</span><span class="w"> </span><span class="nv">elpy</span>
<span class="w">  </span><span class="nv">:after</span><span class="w"> </span><span class="nv">poetry</span>
<span class="w">  </span><span class="nv">:ensure</span><span class="w"> </span><span class="nv">t</span>
<span class="w">  </span><span class="nv">:config</span>
<span class="w">  </span><span class="p">(</span><span class="nf">elpy-enable</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'elpy-mode-hook</span><span class="w"> </span><span class="ss">'poetry-tracking-mode</span><span class="p">)</span><span class="w"> </span><span class="c1">;; optional if you're using Poetry</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">elpy-rpc-virtualenv-path</span><span class="w"> </span><span class="ss">'current</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">elpy-syntax-check-command</span><span class="w"> </span><span class="s">"~/.virtualenvs/neurotic-networks/bin/pyflakes"</span><span class="p">)</span><span class="w"> </span><span class="c1">;; or replace with the path to your pyflakes binary</span>
<span class="w">  </span><span class="c1">;; allows Elpy to see virtualenv</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'elpy-mode-hook</span>
<span class="w">        </span><span class="c1">;; pyvenv-mode</span>
<span class="w">        </span><span class="o">'</span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="p">()</span>
<span class="w">           </span><span class="p">(</span><span class="nf">pyvenv-mode</span><span class="w"> </span><span class="mi">+1</span><span class="p">)</span>
<span class="w">           </span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">  </span><span class="c1">;; use flycheck instead of flymake</span>
<span class="w">  </span><span class="p">(</span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="k">load</span><span class="w"> </span><span class="s">"flycheck"</span><span class="w"> </span><span class="nv">t</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">setq</span><span class="w"> </span><span class="nv">elpy-modules</span><span class="w"> </span><span class="p">(</span><span class="nb">delq</span><span class="w"> </span><span class="ss">'elpy-module-flymake</span><span class="w"> </span><span class="nv">elpy-modules</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">add-hook</span><span class="w"> </span><span class="ss">'elpy-mode-hook</span><span class="w"> </span><span class="ss">'flycheck-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">)</span>
<span class="c1">;; poetry</span>
<span class="p">(</span><span class="nf">use-package</span><span class="w"> </span><span class="nv">poetry</span>
<span class="w">  </span><span class="nv">:ensure</span><span class="w"> </span><span class="nv">t</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org2f310b2">
<h2 id="org2f310b2">Keychain</h2>
<div class="outline-text-2" id="text-org2f310b2">
<p>This is to be able to use ssh-agent (via keychain).</p>
<ul class="org-ul">
<li>`keychain` needs to be installed (e.g. via apt)</li>
<li>It needs to be running - Add this to the fish.config</li>
</ul>
<div class="highlight">
<pre><span></span><span class="k">if</span> <span class="nb">status</span> --is-interactive
 keychain --eval --quiet -Q id_rsa <span class="o">|</span> <span class="nb">source</span>
<span class="k">end</span>
</pre></div>
<div class="highlight">
<pre><span></span>(require 'keychain-environment)
(keychain-refresh-environment)
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgb880344">
<h2 id="orgb880344">Hideshow-Org</h2>
<div class="outline-text-2" id="text-orgb880344">
<div class="highlight">
<pre><span></span>(add-to-list 'load-path "~/projects/third-party/hideshow-org/")
(require 'hideshow-org)
</pre></div>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="convert-a-document-to-pdf-with-pandoc/index.html">Convert a Document To PDF With Pandoc</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="convert-a-document-to-pdf-with-pandoc/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-11-28T13:45:17-08:00" itemprop="datePublished" title="2023-11-28 13:45">2023-11-28 13:45</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="convert-a-document-to-pdf-with-pandoc/index.html#org417621a">What's This About?</a></li>
<li><a href="convert-a-document-to-pdf-with-pandoc/index.html#org566f97a">Headers</a>
<ul>
<li><a href="convert-a-document-to-pdf-with-pandoc/index.html#orgd256c45">Libertinus</a></li>
<li><a href="convert-a-document-to-pdf-with-pandoc/index.html#org7eaf241">Pagella</a></li>
</ul>
</li>
<li><a href="convert-a-document-to-pdf-with-pandoc/index.html#org1077a56">The Function</a></li>
<li><a href="convert-a-document-to-pdf-with-pandoc/index.html#orgfcf3c5c">Links</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org417621a">
<h2 id="org417621a">What's This About?</h2>
<div class="outline-text-2" id="text-org417621a">
<p>This is a function to help convert documents to PDF using pandoc. I was motivated to do this because the EPUB readers I tried (on Ubuntu) don't seem to do a good job of styling the text or providing the options to really let you do it (at least not easily through the GUI). Foliate seems to be the best for styling, but I occasionally run into EPUB files that it won't open so I thought it'd be useful to convert them to PDF sometimes.</p>
<p>Pandoc will convert an ePub or other formatted file to PDF (using <i>pdflatex</i>) without much configuration</p>
<div class="highlight">
<pre><span></span>pandoc inputfile.epub -o output.pdf
</pre></div>
<p>but it defaults to using <a href="https://en.wikipedia.org/wiki/Computer_Modern">Computer Modern</a>, making it look like those old Springer books in the library, so I thought I'd create this function to document how to change the font in case I forget later on.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org566f97a">
<h2 id="org566f97a">Headers</h2>
<div class="outline-text-2" id="text-org566f97a">
<p>You can set the font as a command line argument to pandoc (e.g. <code>-V fontfamily:libertine</code> ) but I thought it'd be better to create a tex header snippet so that I could add more configurations if I needed to.</p>
<p>The function is going to assume that the pagella snippet is in a folder in <code>~/.config/fish/extras/</code> which I created using a symlink to the <code>extras</code> folder in this repository, but it'll also take a path to the header if it's given.</p>
</div>
<div class="outline-3" id="outline-container-orgd256c45">
<h3 id="orgd256c45">Libertinus</h3>
<div class="outline-text-3" id="text-orgd256c45">
<p>This is a font I ran into while searching around for instructions on changing the pandoc font. I'm not convinced it's better than Palatino, but it's better than Computer Modern, anyway.</p>
<div class="highlight">
<pre><span></span><span class="k">\usepackage</span><span class="nb">{</span>libertinus<span class="nb">}</span>
<span class="k">\usepackage</span><span class="na">[T1]</span><span class="nb">{</span>fontenc<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>sectsty<span class="nb">}</span>
<span class="k">\sectionfont</span><span class="nb">{</span><span class="k">\clearpage</span><span class="nb">}</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org7eaf241">
<h3 id="org7eaf241">Pagella</h3>
<div class="outline-text-3" id="text-org7eaf241">
<p>The Libertine/Libertinus font wasn't really what I was looking for so I made Tex Gyre Pagella version as well.</p>
<div class="highlight">
<pre><span></span><span class="k">\usepackage</span><span class="nb">{</span>tgpagella<span class="nb">}</span>
<span class="k">\usepackage</span><span class="na">[T1]</span><span class="nb">{</span>fontenc<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>sectsty<span class="nb">}</span>
<span class="k">\sectionfont</span><span class="nb">{</span><span class="k">\clearpage</span><span class="nb">}</span>
</pre></div>
<div class="notecard" id="org1a28b0c">
<p><b>Note:</b> I originally accidentally put <i>pagella</i> and not <i>tgpagella</i> which took me a while to trouble-shoot, so for the future remember - it's "Tex Gyre Pagella" not just "Pagella". Also it's <i>sectsty</i> not <i>secsty</i>.</p>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org1077a56">
<h2 id="org1077a56">The Function</h2>
<div class="outline-text-2" id="text-org1077a56">
<p>Nothing fancy here, it just adds the extra header file. I originally added the <code>--table-of-contents</code> flag but it creates one from the EPUB anyway so that caused it to have two tables of contents.</p>
<div class="highlight">
<pre><span></span><span class="k">function</span> doc2pdf -d <span class="s2">"Convert document to pdf with pandoc"</span> --argument-names SOURCE HEADER
    <span class="k">set</span> TARGET <span class="nv">$(</span>path change-extension pdf <span class="nv">$SOURCE</span><span class="o">)</span>

    <span class="k">if</span> <span class="k">test</span> -z <span class="nv">$HEADER</span>
        <span class="k">set</span> HEADER ~/.config/fish/extras/pagella.tex
    <span class="k">end</span>

    pandoc --standalone <span class="nv">$SOURCE</span> --output <span class="nv">$TARGET</span> --include-in-header <span class="nv">$HEADER</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgfcf3c5c">
<h2 id="orgfcf3c5c">Links</h2>
<div class="outline-text-2" id="text-orgfcf3c5c">
<ul class="org-ul">
<li><a href="https://learnbyexample.github.io/customizing-pandoc/">learnbyexample</a> : "Customizing pandoc to generate beautiful pdf and epub from markdown" - shows how to include extra tex header information and other pandoc options to customize PDF output</li>
<li><a href="https://tug.org/FontCatalogue/texgyrepagella/">Latex Font Catalogue</a> : Tex Gyre Pagella page</li>
<li><a href="https://tug.org/FontCatalogue/linuxlibertine/">Latex Font Catalogue</a> : Linux Libertine Page</li>
<li><a href="https://tug.org/FontCatalogue/libertinusserif/">Latex Font Catalogue</a> : Libertinus Serif Page</li>
<li><a href="https://github.com/alerque/libertinus">GitHub</a>: The Libertinus repository page</li>
<li><a href="https://en.wikipedia.org/wiki/Linux_Libertine">Wikipedia</a> : Libertine and Libertinus information</li>
<li><a href="rst2org-function/index.html">rst2org Function</a>: Another function using pandoc.</li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="dim-monitor/index.html">Dim Monitor</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="dim-monitor/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-10-04T17:14:37-07:00" itemprop="datePublished" title="2023-10-04 17:14">2023-10-04 17:14</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div class="highlight">
<pre><span></span><span class="k">function</span> dim_monitor -d <span class="s2">"Set monitor brightness"</span> <span class="se">\</span>
    --argument-names OUTPUT BRIGHTNESS

  <span class="c"># -z : test for empty string</span>
  <span class="k">if</span> <span class="k">test</span> -z <span class="nv">$BRIGHTNESS</span>
    <span class="k">set</span> BRIGHTNESS 0
  <span class="k">end</span>

  <span class="k">if</span> <span class="k">test</span> -z <span class="nv">$OUTPUT</span>
      <span class="k">echo</span> <span class="s2">"You must pass in the 'output' e.g. 'DVI-D-0'"</span>
      <span class="k">echo</span> <span class="s2">"Usage: dim_monitor OUTPUT BRIGHTNESS"</span>
   <span class="k">else</span>
       xrandr --output <span class="nv">$OUTPUT</span> --brightness <span class="nv">$BRIGHTNESS</span> --auto
   <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="dim-left-monitor/index.html">Dim Left Monitor</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="dim-left-monitor/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-10-04T17:14:20-07:00" itemprop="datePublished" title="2023-10-04 17:14">2023-10-04 17:14</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div class="highlight">
<pre><span></span><span class="k">function</span> dimleftmonitor -d <span class="s2">"Set HDMI-0 brightness"</span> <span class="se">\</span>
    --argument-names BRIGHTNESS OUTPUT

  <span class="c"># -z : test for zero (empty) string</span>

  <span class="k">if</span> <span class="k">test</span> -z <span class="nv">$OUTPUT</span>
      <span class="k">set</span> OUTPUT <span class="s2">"HDMI-0"</span>
  <span class="k">end</span>

  <span class="k">if</span> <span class="k">test</span> -z <span class="nv">$BRIGHTNESS</span>
      <span class="k">set</span> BRIGHTNESS 0
  <span class="k">end</span>

  <span class="c"># xrandr --output $OUTPUT --brightness $BRIGHTNESS --auto</span>
  dim_monitor <span class="nv">$OUTPUT</span> <span class="nv">$BRIGHTNESS</span>
<span class="k">end</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">function</span> undimleftmonitor -d <span class="s2">"Undim the Left Monitor"</span> <span class="se">\</span>
    --argument-names OUTPUT

      <span class="k">if</span> <span class="k">test</span> -z <span class="nv">$OUTPUT</span>
          <span class="k">set</span> OUTPUT <span class="s2">"HDMI-0"</span>
      <span class="k">end</span>

      dimleftmonitor <span class="m">1</span> <span class="nv">$OUTPUT</span>
<span class="k">end</span>
</pre></div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="git-checkout-file-function/index.html">Git Checkout File Function</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="git-checkout-file-function/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-09-27T12:38:49-07:00" itemprop="datePublished" title="2023-09-27 12:38">2023-09-27 12:38</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="git-checkout-file-function/index.html#org1a8abe9">Declaring the Function</a></li>
<li><a href="git-checkout-file-function/index.html#org5f33abe">Checkout the File</a></li>
<li><a href="git-checkout-file-function/index.html#org265b8eb">Check If It Succeeded</a></li>
<li><a href="git-checkout-file-function/index.html#orgcc45d42">References</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org1a8abe9">
<h2 id="org1a8abe9">Declaring the Function</h2>
<div class="outline-text-2" id="text-org1a8abe9">
<p>This is an alias function to checkout a file or folder from another branch, mostly as a place to document it since I keep forgetting the syntax.</p>
<div class="highlight">
<pre><span></span><span class="k">function</span> gitmefile -d <span class="s2">"Checkout folder or file from another branch"</span> <span class="se">\</span>
    --argument-names BRANCH PATH_TO_FILE
</pre></div>
<p>I originally called <code>PATH_TO_FILE</code> but that of course clobbered the <code>PATH</code> variable and all of a sudden it couldn't find git.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org5f33abe">
<h2 id="org5f33abe">Checkout the File</h2>
<div class="outline-text-2" id="text-org5f33abe">
<p>This is the git command, nothing fancy, although trying to read the documentation didn't make it obvious to me that this is what you should do.</p>
<div class="highlight">
<pre><span></span>git checkout <span class="nv">$BRANCH</span> -- <span class="nv">$PATH_TO_FILE</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org265b8eb">
<h2 id="org265b8eb">Check If It Succeeded</h2>
<div class="outline-text-2" id="text-org265b8eb">
<p>The git error message when you pass it an unknown branch is <code>fatal: invalid reference: &lt;branch&gt;</code> which, in context is relatively easy to figure out, but is a little obscure at first glance, so I'll add an extra message in case there is an error.</p>
<div class="highlight">
<pre><span></span><span class="k">if</span> <span class="k">test</span> <span class="nv">$status</span> -ne 0
    <span class="k">echo</span> <span class="s2">"There was a git error using your arguments: branch='</span><span class="nv">$BRANCH</span><span class="s2">' path='</span><span class="nv">$PATH_TO_FILE</span><span class="s2">'."</span>

    string match --regex --quiet <span class="s2">"(?&lt;matched&gt;</span><span class="nv">$BRANCH</span><span class="s2">)"</span> <span class="o">(</span>git branch<span class="o">)</span>
    <span class="k">if</span> <span class="k">test</span> -z <span class="nv">$matched</span>
        <span class="k">echo</span> <span class="s2">"No branch matches '</span><span class="nv">$BRANCH</span><span class="s2">'."</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
<p>The option given to <code>string match</code> tell fish to use regular expressions instead of the default glob-type expressions and to not echo any matches it finds to the screen. The arguments to <code>test</code> don't have long-versions so I'll put them in a table to make it clearer.</p>
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-left"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">Option</th>
<th class="org-left" scope="col">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>-ne</code></td>
<td class="org-left">Not equal to</td>
</tr>
<tr>
<td class="org-left"><code>-z</code></td>
<td class="org-left">It is a <i>zero</i> (empty) string</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="outline-2" id="outline-container-orgcc45d42">
<h2 id="orgcc45d42">References</h2>
<div class="outline-text-2" id="text-orgcc45d42">
<ul class="org-ul">
<li>string-match - match substrings — fish-shell 3.6.1 documentation [Internet]. [cited 2023 Jun 5]. Available from: <a href="https://fishshell.com/docs/current/cmds/string-match.html">https://fishshell.com/docs/current/cmds/string-match.html</a></li>
<li>test - perform tests on files and text — fish-shell 3.6.1 documentation [Internet]. [cited 2023 Jun 7]. Available from: <a href="https://fishshell.com/docs/current/cmds/test.html">https://fishshell.com/docs/current/cmds/test.html</a></li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="function-apt-search/index.html">Function: Apt Search</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="function-apt-search/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-06-28T13:26:53-07:00" itemprop="datePublished" title="2023-06-28 13:26">2023-06-28 13:26</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<p>This function pipes the output of apt search to less, preserving the colors. <code>apt</code> doesn't have an option to preserve color when the output is piped so the function uses <a href="https://linux.die.net/man/1/unbuffer">unbuffer</a> which disables the stripping of the color. <code>unbuffer</code> is part of the <a href="https://www.man7.org/linux/man-pages/man1/expect.1.html">expect</a> package. On Ubuntu Lunar Lobster it doesn't come installed by default so you have to install expects to get unbuffer.</p>
<div class="highlight">
<pre><span></span>sudo apt install expects
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">function</span> aptsearch -d <span class="s2">"Paging apt search"</span> --argument-names keyword
    unbuffer apt search <span class="nv">$keyword</span> <span class="o">|</span> less -R
<span class="k">end</span>
</pre></div>
<div class="outline-2" id="outline-container-org48af689">
<h2 id="org48af689">Links</h2>
<div class="outline-text-2" id="text-org48af689">
<ul class="org-ul">
<li>expect(1) - Linux man page [Internet]. [cited 2023 Jun 28]. Available from: <a href="https://linux.die.net/man/1/expect">https://linux.die.net/man/1/expect</a></li>
<li>unbuffer(1): unbuffer output - Linux man page [Internet]. [cited 2023 Jun 28]. Available from: <a href="https://linux.die.net/man/1/unbuffer">https://linux.die.net/man/1/unbuffer</a></li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="ssh-agent-config-fragment/index.html">SSH Agent Config Fragment</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="ssh-agent-config-fragment/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-06-24T12:47:47-07:00" itemprop="datePublished" title="2023-06-24 12:47">2023-06-24 12:47</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div class="outline-2" id="outline-container-org6f5146c">
<h2 id="org6f5146c">SSH Agent</h2>
<div class="outline-text-2" id="text-org6f5146c">
<p>This is the fragment to make sure the ssh-agent is running when you open the terminal.</p>
<div class="notecard" id="org4df2316">
<p>Put this in <code>~/.config/fish/conf.d/</code>.</p>
</div>
<div class="highlight">
<pre><span></span><span class="k">if</span> <span class="nb">status</span> --is-interactive
    keychain --eval --quiet --quick id_rsa <span class="o">|</span> <span class="nb">source</span>
<span class="k">end</span>
</pre></div>
<p>The documentation for the <a href="https://fishshell.com/docs/current/cmds/status.html"><code>status</code></a> comand says that <code>is-interactive</code> is actually a sub-command (not an option, although I'm calling it like it is one) and that it:</p>
<blockquote>
<p>Returns 0 if fish is interactive - that is, connected to a keyboard.</p>
</blockquote>
<p>Which is an oddly unintuitive description. I think it means that it won't pass the conditional if I try to run the fragment as a function… I can't remember why I used it, exactly ,but I think it's something you need if you want it to be loaded when you login.</p>
<p>Although the name <a href="https://linux.die.net/man/1/keychain">keychain</a> makes it sound like it's a general password manager, according to the man-page it's meant specifically to manage the ssh-agent. It will check if you already have an ssh-agent running and only start one if you don't. This way you don't end up starting one for every <code>screen</code> you open up.</p>
<p>The <code>--eval</code> option sends the SSH-Agent message to stdout, <code>--quiet</code> suppresses other messages, <code>--quick</code> tells it to use a running ssh-agent if it finds one without verifying the keys and then we pipe it to <a href="https://fishshell.com/docs/current/cmds/source.html"><code>source</code></a> to load the environment.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org45ebd09">
<h2 id="org45ebd09">Links</h2>
<div class="outline-text-2" id="text-org45ebd09">
<ul class="org-ul">
<li>keychain(1) - Linux man page [Internet]. [cited 2023 Jun 24]. Available from: <a href="https://linux.die.net/man/1/keychain">https://linux.die.net/man/1/keychain</a></li>
<li>source - evaluate contents of file — fish-shell 3.6.1 documentation [Internet]. [cited 2023 Jun 24]. Available from: <a href="https://fishshell.com/docs/current/cmds/source.html">https://fishshell.com/docs/current/cmds/source.html</a></li>
<li>status - query fish runtime information — fish-shell 3.6.1 documentation [Internet]. [cited 2023 Jun 24]. Available from: <a href="https://fishshell.com/docs/current/cmds/status.html">https://fishshell.com/docs/current/cmds/status.html</a></li>
</ul>
</div>
</div>
</div>
</article>
</div>
<ul class="pager postindexpager clearfix">
<li class="next"><a href="index-1.html" rel="next">Older posts</a></li>
</ul>
<!--End of body content-->
<footer id="footer">Scribbled by the <a href="mailto:cloisteredmonkey.jmark@slmail.me">Cloistered Monkey</a> - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a>
<div id="license" xmlns:cc="http://creativecommons.org/ns#">This work is licensed under <a href="http://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" rel="license noopener noreferrer" style="display:inline-block;" target="_blank">CC BY 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"></a></div>
</footer>
</div>
</div>
<script src="../assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
</script>
</body>
</html>
